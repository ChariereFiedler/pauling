{% extends "layout.html" %}

{% block content %}
<div class="index">
    <div class="content-wrapper">
        <div class="poster-form">
            <form action="{{ url_for('index') }}" method="POST">
                {{ form.csrf_token }}

                <div class="poster-form-field-url">
                    <div class="control is-expanded">
                        <input{% if form.source_url.errors %} class="is-danger"{% endif %}
                            name="source_url" type="text" placeholder="Paste the link to your poster on F1000, Figshare, etc.">
                        {% for error in form.source_url.errors %}
                        <p class="help is-danger">{{ error }}</p>
                        {% endfor %}
                        <p class="help">
                            Want to try but no poster? You can test with this one maybe:
                            <a id="try-link" href="https://figshare.com/articles/Recognising_influence_Helping_authors_of_non-traditional_research_outputs_evidence_the_reach_and_potential_impacts_of_their_work/4245068">Recognising influence: Helping authors of non-traditional research outputs
                            evidence the reach and potential impacts of their work</a>.
                        </p>
                    </div>
                    <div class="control">
                        <button id="btn-submit" {% if form.source_url.errors %} class="is-danger"{% endif %}>
                            Submit
                        </button>
                    </div>
                </div>
            </form>
        </div>
    </div>
</div>
{% endblock %}

{% block js %}
<script>
var $btn = document.getElementById('btn-submit');
$btn.addEventListener('click', function () {
    if ($btn.classList) {
        $btn.classList.add('is-loading');
    } else {
        $btn.className += ' is-loading';
    }
});
var $try = document.getElementById('try-link');
$try.addEventListener('click', function (e) {
    e.preventDefault();
    document.querySelector('input[name="source_url"]').value = $try.href;
});
</script>
{% endblock %}
